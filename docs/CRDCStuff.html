<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Python: module CRDCStuff</title>
</head><body>

<table class="heading">
<tr class="heading-text decor">
<td class="title">&nbsp;<br><strong class="title">CRDCStuff</strong></td>
<td class="extra"><a href=".">index</a><br><a href="file:c%3A%5Cusers%5Cpihltd%5Cdocuments%5Cgithub%5Ccrdclib%5Csrc%5Ccrdcstuff.py">c:\users\pihltd\documents\github\crdclib\src\crdcstuff.py</a></td></tr></table>
    <p><span class="code">#&nbsp;A&nbsp;collection&nbsp;of&nbsp;random&nbsp;routines&nbsp;I&nbsp;use&nbsp;frequently</span></p>
<p>
<table class="section">
<tr class="decor pkg-content-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Modules</strong></td></tr>
    
<tr><td class="decor pkg-content-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><table><tr><td class="multicolumn"><a href="json.html">json</a><br>
<a href="os.html">os</a><br>
</td><td class="multicolumn"><a href="re.html">re</a><br>
<a href="requests.html">requests</a><br>
</td><td class="multicolumn"><a href="yaml.html">yaml</a><br>
</td><td class="multicolumn"></td></tr></table></td></tr></table><p>
<table class="section">
<tr class="decor functions-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Functions</strong></td></tr>
    
<tr><td class="decor functions-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt><a name="-cleanString"><strong>cleanString</strong></a>(inputstring, leavewhitespace=False)</dt><dd><span class="code">Removes&nbsp;non-printing&nbsp;characters&nbsp;and&nbsp;whitespaces&nbsp;from&nbsp;strings<br>
:param&nbsp;inputstring:&nbsp;The&nbsp;string&nbsp;to&nbsp;be&nbsp;processed<br>
:type&nbsp;intputstring:&nbsp;String<br>
:param&nbsp;leavewhitespace:&nbsp;Boolean,&nbsp;if&nbsp;True,&nbsp;uses&nbsp;regex&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?]+.&nbsp;&nbsp;If&nbsp;False,&nbsp;uses&nbsp;regex&nbsp;[\W]+<br>
:type&nbsp;leavewhitespace:&nbsp;Boolean,&nbsp;optional,&nbsp;default&nbsp;False<br>
:return:&nbsp;Processed&nbsp;string<br>
:rtype:&nbsp;String</span></dd></dl>
 <dl><dt><a name="-dhAPICreds"><strong>dhAPICreds</strong></a>(tier)</dt><dd><span class="code">A&nbsp;simple&nbsp;way&nbsp;to&nbsp;retrieve&nbsp;the&nbsp;Data&nbsp;Hub&nbsp;submission&nbsp;URLs&nbsp;and&nbsp;API&nbsp;tokens<br>
:param&nbsp;tier:&nbsp;A&nbsp;string&nbsp;for&nbsp;the&nbsp;tier&nbsp;to&nbsp;return.&nbsp;&nbsp;Must&nbsp;be&nbsp;one&nbsp;of&nbsp;prod,&nbsp;stage,&nbsp;qa,&nbsp;qa2,&nbsp;dev,&nbsp;dev2<br>
:type&nbsp;tier:&nbsp;String<br>
:return&nbsp;url:&nbsp;The&nbsp;URL&nbsp;for&nbsp;the&nbsp;requested&nbsp;tier<br>
:rtype&nbsp;url:&nbsp;string<br>
:return&nbsp;token:&nbsp;The&nbsp;API&nbsp;access&nbsp;token&nbsp;for&nbsp;the&nbsp;tier.<br>
:rtype&nbsp;token:&nbsp;String</span></dd></dl>
 <dl><dt><a name="-dhApiQuery"><strong>dhApiQuery</strong></a>(url, apitoken, query, variables=None)</dt><dd><span class="code">Runs&nbsp;queries&nbsp;against&nbsp;the&nbsp;Data&nbsp;Hub&nbsp;Submission&nbsp;Portal&nbsp;API<br>
:param&nbsp;url:&nbsp;URL&nbsp;of&nbsp;the&nbsp;Submission&nbsp;Portal&nbsp;API<br>
:type&nbsp;url:&nbsp;URL<br>
:param&nbsp;apitoken:&nbsp;API&nbsp;Access&nbsp;token&nbsp;obtained&nbsp;from&nbsp;the&nbsp;Submission&nbsp;Portal<br>
:type&nbsp;apitoken:&nbsp;String<br>
:param&nbsp;query:&nbsp;A&nbsp;valid&nbsp;GraphQL&nbsp;query<br>
:type&nbsp;query:&nbsp;String<br>
:param&nbsp;variables:&nbsp;a&nbsp;JSON&nbsp;object&nbsp;containing&nbsp;any&nbsp;variables&nbsp;for&nbsp;the&nbsp;provided&nbsp;query<br>
:type&nbsp;variables:&nbsp;dictionary,&nbsp;optional<br>
:return:&nbsp;If&nbsp;status_code&nbsp;==&nbsp;200,&nbsp;a&nbsp;JSON&nbsp;object&nbsp;that&nbsp;is&nbsp;the&nbsp;full&nbsp;query&nbsp;response<br>
:rtype:&nbsp;dictionary<br>
:return:&nbsp;If&nbsp;status_code&nbsp;!=&nbsp;200,&nbsp;a&nbsp;string&nbsp;with&nbsp;error&nbsp;code&nbsp;and&nbsp;message<br>
:rtype:&nbsp;string<br>
:return:&nbsp;If&nbsp;HTTP&nbsp;error,&nbsp;the&nbsp;requests.HTTPError&nbsp;object<br>
:rtype:&nbsp;request.HTTPError</span></dd></dl>
 <dl><dt><a name="-getCDERecord"><strong>getCDERecord</strong></a>(cde_id, cde_version=None)</dt><dd><span class="code">Queries&nbsp;the&nbsp;caDSR&nbsp;API&nbsp;with&nbsp;a&nbsp;CDE&nbsp;identifier&nbsp;and&nbsp;optional&nbsp;version,&nbsp;returns&nbsp;the&nbsp;full&nbsp;JSON&nbsp;object<br>
#If&nbsp;no&nbsp;version&nbsp;is&nbsp;given,&nbsp;returns&nbsp;whatever&nbsp;the&nbsp;latest&nbsp;version&nbsp;is.<br>
:param&nbsp;cde_id:&nbsp;CDE&nbsp;Public&nbsp;identifier<br>
:type&nbsp;cde_id:&nbsp;Integer<br>
:param&nbsp;cde_version:&nbsp;The&nbsp;version&nbsp;of&nbsp;the&nbsp;CDE&nbsp;to&nbsp;be&nbsp;queried.&nbsp;&nbsp;If&nbsp;not&nbsp;supplied&nbsp;the&nbsp;latest&nbsp;version&nbsp;will&nbsp;be&nbsp;returned<br>
:type&nbsp;cde_version:&nbsp;String,&nbsp;optional<br>
:return:&nbsp;If&nbsp;status_code&nbsp;==&nbsp;200,&nbsp;a&nbsp;JSON&nbsp;object&nbsp;that&nbsp;is&nbsp;the&nbsp;full&nbsp;CDE&nbsp;record<br>
:rtype:&nbsp;dictionary<br>
:return:&nbsp;If&nbsp;status_code&nbsp;!=&nbsp;200,&nbsp;a&nbsp;string&nbsp;with&nbsp;error&nbsp;code&nbsp;and&nbsp;message<br>
:rtype:&nbsp;string<br>
:return:&nbsp;If&nbsp;HTTP&nbsp;error,&nbsp;the&nbsp;requests.HTTPError&nbsp;object<br>
:rtype:&nbsp;request.HTTPError</span></dd></dl>
 <dl><dt><a name="-readYAML"><strong>readYAML</strong></a>(yamlfile)</dt><dd><span class="code">This&nbsp;method&nbsp;reads&nbsp;a&nbsp;YAML&nbsp;file&nbsp;and&nbsp;returns&nbsp;a&nbsp;JSON&nbsp;object<br>
:param&nbsp;yamlfile:&nbsp;A&nbsp;full&nbsp;path&nbsp;to&nbsp;the&nbsp;yaml&nbsp;file&nbsp;to&nbsp;be&nbsp;parsed<br>
:type&nbsp;yamlfile:&nbsp;String<br>
:return:&nbsp;A&nbsp;JSON&nbsp;object/dictionary&nbsp;representing&nbsp;the&nbsp;YAML&nbsp;file&nbsp;content<br>
:rtype:&nbsp;dictionary</span></dd></dl>
 <dl><dt><a name="-writeYAML"><strong>writeYAML</strong></a>(filename, jsonobj)</dt><dd><span class="code">Takes&nbsp;a&nbsp;filename&nbsp;and&nbsp;JSON&nbsp;object/dictionary&nbsp;and&nbsp;writes&nbsp;out&nbsp;a&nbsp;basic&nbsp;yaml&nbsp;file<br>
:param&nbsp;filename:&nbsp;A&nbsp;full&nbsp;path&nbsp;to&nbsp;the&nbsp;output&nbsp;file<br>
:type&nbsp;filename:&nbsp;String<br>
:param&nbsp;jsonobj:&nbsp;A&nbsp;dictionary&nbsp;to&nbsp;be&nbsp;written&nbsp;as&nbsp;YAML<br>
:type&nbsp;jsonobj:&nbsp;Dictionary</span></dd></dl>
</td></tr></table>
</body></html>